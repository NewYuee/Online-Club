<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Online-Club</title>
    <link rel="icon" type="image/png" href="../../static/img/MMAD.png">
    <link rel="stylesheet" href="../../static/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../static/css/index/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.css">
    <link rel="stylesheet" href="../../static/summernote/summernote.min.css">
</head>
<body style="padding-top: 60px;background-color: rgb(237, 244, 246);">
<th:block th:include="common/common.html :: nav"></th:block>
   <div class="container">
      <div class="row">
         <!-- 左边栅格 -->
         <div class="col-md-3 col-xs-12 clearfix" style="padding-left: 7px;padding-right: 7px;padding-top: 30px;">
            <div class="card profile" style="text-align: center;">
               <img src="../../static/img/user_pic.jpg" style="width: 130px;height: 130px;border-radius: 50%;" alt="勇敢的心">
               <div style="border-bottom: 1px solid #eaebec;">
                 <h4 >勇敢的心</h4> 
                 <p>这家伙很懒什么都没留下...这家伙很懒什么都没留下...这家伙很懒什么都没留下...</p> 
               </div>
               <div class="col-md-6 col-sm-6 col-xs-6" style="border-right: 1px solid #eaebec;">
                  <a href="#" class="text-info">我的关注</a>
                  
               </div>
               <div class="col-md-6 col-sm-6 col-xs-6" >
                  <a href="#" class="text-info">个人主页</a>
               </div>
            </div>
            
            <div class="card">
               <div class="box">
                  <div class="box-title  p-3" style="border-bottom: 1px solid #eaebec;">
                     <h4><span class="glyphicon glyphicon-pushpin" aria-hidden="true"></span> 与我相关</h4>
                  </div>
                  <div class="box-body ">
                     <span class="glyphicon glyphicon-hand-right" aria-hidden="true"></span><a>大风文学社的入会申请</a>--待处理
                  </div>
                  <div class="box-body">
                     <span class="glyphicon glyphicon-hand-right" aria-hidden="true"></span><a>其它文学社的入会申请</a>--已通过
                  </div>
                  <div class="box-body">
                     热门s
                  </div>
               </div>
            </div>
         </div>
         <!-- 中间的栅格 -->
         <div class="col-md-6 col-xs-12 clearfix" style="padding-left: 7px;padding-right: 7px;padding-top: 30px;">
            <div class="box shadow-sm border rounded bg-white mb-3 card">
               <ul class="nav nav-justified border-bottom panel-heading" style="border-bottom: 1px solid #eaebec;" id="myTab" role="tablist">
                  <li class="nav-item" style="border-right: 1px solid #eaebec;">
                     <a class="nav-link" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">
                        <span class="glyphicon glyphicon-pencil " aria-hidden="true"></span>随便说说
                     </a>
                  </li>
                  <li class="nav-item">
                     <a class="nav-link" id="article-tab" data-toggle="tab" href="#article" role="tab" aria-controls="article" aria-selected="false">
                        <span class=" glyphicon glyphicon-edit" aria-hidden="true"></span>文章说说
                     </a>
                  </li>
               </ul>
               <div class="tab-content" id="myTabContent">
                  <div class="tab-pane fade in active" id="home" role="tabpanel" aria-labelledby="home-tab">
                     <form id="active_form">
                        <div class="form-group">
                           <label for="sel_role">请选择一个钟意的社团发布动态</label>
                           <select id="sel_role" name="clubname" class="form-control" title="请选择" data-width="150px">
                              <option>您可以选择一个社团绑定话题~</option>
                           <div th:each="myclub:${session.myclub_list}">
                              <option th:text="${myclub.clubName}"></option>
                           </div>
                           </select>
                        </div>
                        <div class="form-group">
                           <textarea placeholder="记录此刻想法..." id="inputTextarea" class="form-control border-0 p-0 shadow-none" rows="4"></textarea>
                        </div>
                        <div class="form-group">
                           <button type="button" onclick="sendActive()" class="btn btn-info btn-lg btn-block">发送 <span class="glyphicon glyphicon-send" aria-hidden="true"></span></button>
                        </div>
                     </form>
                  </div>
                  <div class="tab-pane fade" id="article" role="tabpanel" aria-labelledby="article-tab">
                     <form id="article-form">
                        <div class="form-group">
                           <label >您可以选择一个社团绑定话题</label>
                           <select name="clubname" class="form-control" title="请选择" data-width="150px">
                              <option>您可以选择一个社团绑定话题~</option>
                              <div th:each="myclub:${session.myclub_list}">
                                 <option th:text="${myclub.clubName}"></option>
                              </div>
                           </select>
                        </div>
                        <div class="form-group">
                           <input placeholder="取个标题吧~" class="form-control border-0 p-0 shadow-none" name="title" style="border-bottom: 1px solid #eaebec;">
                        </div>
                        <div class="form-group">
                           <textarea id="summernote" name="articleText"></textarea>
                        </div>
                        <div class="form-group">
                           <button type="button" onclick="sendActive()" class="btn btn-warning btn-lg btn-block">发送 <span class="glyphicon glyphicon-send" aria-hidden="true"></span></button>
                        </div>
                     </form>
                  </div>
               </div>
            </div>

            <div class="card active">
               <div id="head">
                  <div id="profile">
                     <img src="../../static/img/user_pic.jpg">
                  </div>
                  <div id="name">
                     <a href="#">勇敢的心11</a>
                  </div>
                  <div id="time">
                     <div style="display: inline-block;">2020-12-24 22:44:56</div>
                     <div style="display: inline-block;float: right;"><a style="color: rgb(204, 204, 216);">jjykcxh</a></div>
                  </div>
               </div>
               <div id="content">
                  <pre id="text">asdaw安抚我</pre>
               </div>
               <div class="active-foot">
                  <div style="display: inline-block;color: rgb(204, 204, 216);"><span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span> <span>1234</span></div>
                  <div style="display: inline-block;">456人点赞</div>
                  <div class="btn-group" style=" display: inline-block;float: right;" role="group">
                     <button type="button" class="btn btn-link dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-option-horizontal" aria-hidden="true"></span></button>
                     <ul class="dropdown-menu " style="min-width: 100px;">
                        <li><a class="like"><img style="width: 20px;height: 20px;" src="../../static/img/like.svg"><span>赞</span></a></li>
                        <li><a class="more"><img style="width: 20px;height: 20px;" src="../../static/img/comment.svg">评论</a></li>
                     </ul>
                  </div>
                  <div id="comment_area">
                        <div class="comment_item"><a href="#">sb</a>:<span>你好sb</span></div>
                        <div class="comment_item"><a href="#">发起方</a>回复<a href="#">sb</a>:<span>n也是完全放弃却无法请问我父亲却无法撒比</span></div>
                        <div class="comment_item" id="omit"><a class="more">共45415条回复 ></a></div>
                  </div>
               </div>
            </div>
            <div class="card" style="text-align: center;">
               <div class="panel panel-warning">
                  <div class="panel-heading">
                     <h4><span><img style="height: 23px;" src="../../static/img/tj.svg"></span>活跃社团推荐</h4>
                  </div>

                  <ul id="bxSlider">
                     <li >
                        <div class="thumbnail">
                           <img src="../../static/img/user_pic.jpg" alt="...">
                           <div class="caption" style="font-family:Arial, Helvetica, sans-serif;">
                             <h4>教王啊我发的完全</h4>
                             <p>yie一个吻啊福娃缺乏却无法去污粉全微分</p>
                             <p><img style="height: 20px;width: 20px;display: inline-block;" src="../../static/img/hot.svg"><span style="color: rgb(204, 204, 216);">活跃度:45824</span> <a href="#" class="btn btn-warning" role="button">立即加入</a></p>
                           </div>
                         </div>
                     </li>
                 </ul>
               </div>
            </div>
            <div class="card active">
               <div id="head">
                  <div id="profile">
                     <img src="../../static/img/user_pic.jpg">
                  </div>
                  <div id="name">
                     <a href="#">勇敢的心11</a>
                  </div>
                  <div id="time">
                     <div style="display: inline-block;">2020-12-24 22:44:56</div>
                     <div style="display: inline-block;float: right;"><a style="color: rgb(204, 204, 216);">jjykcxh</a></div>
                  </div>
               </div>
             <div class="media">
               <div class="media-left">
                   <img style="width: 50px;height: 50px;" class="media-object" src="../../static/img/defaultbkimg.jpeg" alt="...">
               </div>
               <div class="media-body " style="padding-left: 10px;padding-top:5px;background-color: #ebebeb;border-radius: 3%">
                 <h4 class="media-heading">今天是个好日子啊发我</h4>
                 <div class="article_detail"><img style="width: 20px;height: 20px;" src="../../static/img/view.svg"><span>1234</span>阅读 <img id="like_img" style="width: 20px;height: 20px;" src="../../static/img/like.svg"><span id="like_num">186</span>喜欢
                  <a src="#">立即查看</a>
               </div>
               </div>
             </div>
            </div>
         </div>
         <!-- 右边栅格 -->
         <div class="col-md-3 col-xs-12 clearfix" style="padding-left: 7px;padding-right: 7px;padding-top: 30px;">
            <div class="card">
               <div class="box">
                  <div class="box-title border-bottom p-3">
                     <h4>24h热门文章<span class="glyphicon glyphicon-fire" aria-hidden="true"></span></h4>
                  </div>
                  <div class="box-body p-3 table-responsive">
                     <table class="table table-condensed">
                        <tr>
                           <td>xxxx社团xxx</td>
                        </tr>
                        <tr>
                           <td>ssss社团xxx</td>
                        </tr>
                        <tr>
                           <td><a href="#" style="text-decoration: none">x455wwwww啊发给我发社团xxx</a></td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>

            <div class="card">
               <div class="box">
                  <div class="box-title border-bottom p-3">
                     <h4>人气社团推荐<span class="glyphicon glyphicon-signal" aria-hidden="true"></span></h4>
                  </div>
                  <div class="box-body p-3">
                     <table class="table table-condensed">
                        <tr>
                           <td><a href="#" style="text-decoration: none">发社团xxx2</a></td>
                        </tr>
                        <tr>
                           <td><a href="#" style="text-decoration: none">啊发给我</a></td>
                        </tr>
                        <tr>
                           <td><a href="#" style="text-decoration: none">啊发给我发社团xxx</a></td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
            <div class="panel panel-info">
               <div class="panel-heading">
                  联系我们
              </div>
               <div class="panel-body">
                  <div class="col-md-3 col-sm-3 col-xs-3"><a target="blank" rel="external nofollow"
                     href="http://wpa.qq.com/msgrd?V=3&uin=1037211029&Site=QQ&Menu=yes"
                     title="QQ在线"><img  style="width: 30px;height: auto;" src="../../static/img/QQ.svg"></a></div>
                  <div class="col-md-3 col-sm-3 col-xs-3"><a title="新浪微博" target="blank" href="https://weibo.com/u/3196386703"><img style="width: 30px;height: auto;" src="../../static/img/sina.svg"></a></div>
                  <div class="col-md-3 col-sm-3 col-xs-3"><a title="微信公众号"><img style="width: 30px;height: auto;" src="../../static/img/wechat.svg"></a></div>
                  <div class="col-md-3 col-sm-3 col-xs-3"><a  title="Email: new.y@foxmail.com"><img style="width: 30px;height: auto;" src="../../static/img/email.svg"></a></div>
               </div>
               <div class="panel-footer">
                  <p><a style="text-decoration: none;" href="https://beian.miit.gov.cn/">蜀ICP备2021013474号</a></p>
                  <p>Copyright © 2021-2022MMAD</p>
   
               </div>
           </div>
         </div>
      </div>
   </div>
</body>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.min.js"></script>
<script src="../../static/js/bootstrap.js"></script>
<script src="../../static/layer/layer.js"></script>
<script src="../../static/summernote/summernote.min.js"></script>
<script src="../../static/js/index.js"></script>
<script>
   function sendshortActive(){
      var formData=new FormData(document.getElementById('active_form'));
      var input=$('#inputTextarea').val();
      console.log("input=="+input);
      if(input.length==0){
         layer.alert("内容不能为空！");
         return;
      }
      console.log(input);
      formData.append("inputStr",input);
      $.ajax({
         type:'post',
         url:'active/short/insertOne',
         data:formData,
         processData:false,
         contentType:false,
         success:function(res){
            if(res.code==200){
               layer.msg("发送成功");
               setTimeout(reloadPage,1000);
            }
            else{
               layer.alert(res.data.dataInfo)
            }
         }
      });
   }

   function sendArticle(inputStr){
      var formData=new FormData(document.getElementById('article-form'));
      formData.append("inputStr",inputStr);
      $.ajax({
         url:'active/article/insertOne',
         type:'post',
         data:formData,
         processData:false,
         contentType:false,
         success:function(res){
            if(res.code==200){
               layer.msg("发送成功");
               setTimeout(reloadPage,1000);
            }
            else{
               layer.alert(res.data.dataInfo);
            }
         }
      });
   }

   function sendActive(){
      var markupStr = $('#summernote').summernote('code');
      //console.log(markupStr);
      if($('#home-tab').parent('li').hasClass('active')){
         console.log("home-tab");
         sendshortActive();
      }
      else if($('#article-tab').parent('li').hasClass('active')){
         console.log("article-tab");
         if($('#summernote').summernote('isEmpty')){
            layer.alert("请输入内容");
            return;
         }
         sendArticle(markupStr);
      }
      else{
         layer.msg("请选择你要发送的动态类型");
      }
   }

   $('.like').on('click',function (e) {
      var val=$(this).find('span').text();
      if (val=='赞'){
         $(this).find('span').text('已赞');
         $(this).find('img').attr('src','../../static/img/liked.SVG')
      }
      if (val=='已赞'){
         $(this).find('span').text('赞');
         $(this).find('img').attr('src','../../static/img/like.SVG')
      }
      e.stopPropagation();
   });

   $('#like_img').click(function (){
      if ($(this).attr('src')=='../../static/img/liked.svg'){
         var like_num=$('#like_num').text();
         $(this).attr('src','../../static/img/like.svg');
         like_num--;
         $("#like_num").text(like_num);
      }else if ($(this).attr('src')=='../../static/img/like.svg'){
         $(this).attr('src','../../static/img/liked.svg');
         var like_num=$('#like_num').text();
         like_num++;
         $("#like_num").text(like_num);
      }
   });

   $('.more').click(function(){
      layer.open({
         area:'500px',
         title: ['评论列表', 'font-size:18px;'],
         type:1,
         content:' <div class="col-lg-12">\n' +
                 '    <div class="input-group">\n' +
                 '      <input type="text" class="form-control" placeholder="说点什么">\n' +
                 '      <span class="input-group-btn">\n' +
                 '        <button class="btn btn-primary" type="button">评论</button>\n' +
                 '      </span>\n' +
                 '    </div>\n' +
                 '</div>' +
                 '<div class="layeropen" id="comment_area">\n' +
                 '        <div class="comment_item inblock"><a href="#">sb</a>:<span>你好sb</span></div><div style="display:inline-block;float:right"><span><a>回复</a></span> <span><a>删除</a></span></div>\n' +
                 '        <div class="comment_item inblock">\n' +
                 '            <a href="#">发起方</a>回复<a href="#">sb</a>:<span>n也是完全放弃却无法请问我efqqf付全额付清无法父亲却wqeifijqefjqoejqowejo无法撒比</span>\n' +
                 '            <div style="display:inline-block;float:right"><span><a>回复</a></span> <span><a>删除</a></span></div>\n' +
                 '        </div>\n' +
                 '</div>'
      })
   });
</script>
</html>